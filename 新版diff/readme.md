新版diff

1. 双端比较 从左开始找到不同的节点 从右开始找到不同的节点 并对相同的节点进行patch
2. 理想情况 如果老节点全部存在于新节点中 不管是从左还是从右 老节点左侧的指针会大于右侧的指针 此时再遍历 新节点左侧指针 新节点右侧指针 对节点进行挂载(不断插入到新节点最后一个节点即可)
3. 理想情况 如果新节点全部存在于老节点中 不管是从左还是从右 新节点左侧的指针会大于右侧的指针 此时遍历 老节点左侧指针 老节点右侧指针 对dom进行移除
4. 非理想情况 创建一个与未被双端比较的元素长度相等的数组并填充为-1 然后创建一个缓存对象 遍历新节点 将新节点的key-index放入对象 然后遍历老节点 如果缓存中存在与之对应的key 则patch新老节点 不存在就移除节点 并将之前的数组的对应索引变为老节点的位置 并在遍历中确定是否有节点会移动
5. 移动节点的情况 如果存在移动节点的情况 从新节点的未双端的最后一个节点开始 往前 如果缓存数组为-1则表示此节点需要添加(添加到最后一个节点前) 如果当前索引不等于缓存中的索引则代表要移动 移动到它下一个节点之前 其余情况不需要移动